# GridSync

ML-powered Alberta grid stress prediction and community demand response platform.

Predicts blackout risk 24-48 hours in advance using Facebook Prophet trained on AESO historical load data, then coordinates community action to prevent outages before they happen.

---

## What It Does

- Fetches live Alberta grid usage from AESO every 5 minutes
- Predicts grid stress 48 hours in advance using a trained Prophet model
- Shows community impact in real time — how many MW Albertans are collectively saving
- Provides actionable recommendations for reducing usage during peak periods
- Tracks model accuracy against real historical data

---

## Tech Stack

| Layer | Technology |
|---|---|
| Frontend | Next.js (Pages Router) + Tailwind CSS |
| Charts | Recharts |
| ML Model | Facebook Prophet |
| Data | AESO Historical Pool Price Report + Open-Meteo weather |
| Database | Supabase |
| Deployment | Vercel |

---

## Project Structure

```
gridsync/
├── pages/
│   ├── index.js          # Main dashboard
│   ├── predictions.js    # Full 48-hour forecast table
│   ├── community.js      # Collective action dashboard
│   ├── tips.js           # Energy saving recommendations
│   ├── _app.js
│   ├── _document.js
│   └── api/
│       └── live-usage.js # AESO live data endpoint
├── components/
│   ├── GridStatus.js     # Live MW + chart + countdown
│   ├── CollectiveImpact.js
│   ├── PredictionTable.js
│   ├── SmartRecommendations.js
│   └── AccuracyStats.js
├── public/
│   ├── predictions.json  # Generated by predict.py
│   └── accuracy.json     # Generated by train_model.py
└── styles/
    └── globals.css
```

---

## ML Pipeline (separate repo: gridsync-ml)

```
gridsync-ml/
├── clean_data.py         # Cleans AESO CSV export
├── download_weather.py   # Fetches historical weather from Open-Meteo
├── merge_and_train.py    # Merges datasets and trains Prophet model
├── predict.py            # Generates predictions.json from trained model
├── alberta_model.pkl     # Trained model (not committed, back up separately)
├── grid_clean.csv        # Cleaned AESO data
├── weather_clean.csv     # Hourly Alberta temperatures
└── .env                  # OPENWEATHER_KEY (not committed)
```

---

## Getting Started

### Frontend

```bash
git clone https://github.com/your-username/gridsync.git
cd gridsync
npm install
npm run dev
```

Open `http://localhost:3000`

### ML Pipeline

```bash
# Install dependencies
pip install prophet pandas numpy requests python-dotenv

# Clean AESO data (download from aeso.ca first)
python clean_data.py

# Download weather data
python download_weather.py

# Train the model (takes 10-30 minutes)
python merge_and_train.py

# Generate predictions
python predict.py

# Copy output to Next.js
copy predictions.json ..\gridsync\public\predictions.json
copy accuracy.json ..\gridsync\public\accuracy.json
```

### Environment Variables

Create a `.env` file in the ML project root:

```
OPENWEATHER_KEY=your_key_here
```

For the Next.js project, create `.env.local`:

```
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

---

## Data Sources

- **Grid data:** AESO Historical Pool Price Report — `aeso.ca/market/market-and-system-reporting`
- **Weather data:** Open-Meteo Historical API — `open-meteo.com` (free, no key required)
- **Live grid data:** AESO Current Supply Demand Report endpoint

---

## Model Details

- **Algorithm:** Facebook Prophet with additional regressors
- **Training data:** 1 year of hourly Alberta Internal Load (MW)
- **Features:** Daily seasonality, weekly seasonality, yearly seasonality, temperature, is_weekend
- **Accuracy:** ~94% within 200 MW on held-out test data
- **Prediction horizon:** 48 hours ahead, hourly resolution

---

## Deployment

The frontend deploys automatically to Vercel on every push to `main`.

To update predictions on the live site, run `predict.py` and commit the updated `public/predictions.json`:

```bash
python predict.py
copy predictions.json ..\gridsync\public\predictions.json
cd ..\gridsync
git add public/predictions.json
git commit -m "update predictions"
git push
```

---

## Built For

HACKED Hackathon 2025 — University of Alberta 
